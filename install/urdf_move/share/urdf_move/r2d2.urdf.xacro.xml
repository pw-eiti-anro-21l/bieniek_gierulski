<?xml version="1.0" ?>
<robot name="r2d2" xmlns:xacro="http://www.ros.org/wiki/xacro">


	<xacro:property name="yaml_file" value="$(/file.yaml" />
	<xacro:property name="props" value="${load_yaml(yaml_file)}"/>
	<xacro:property name="elevator_len" value="${props['elevator_len']}" />
	<xacro:property name="arm_len" value="${props['arm_len']}" />
	<xacro:property name="manipulator_len" value="${props['manipulator_len']}" />
	<xacro:property name="manipulator_down_range" value="${props['manipulator_down_range']}" />
	<xacro:property name="manipulator_up_range" value="${props['manipulator_up_range']}" />


	<material name='gold'>
		<color rgba='0.89 0.46 0.02 1'/>
	</material>

	<material name='white'>
		<color rgba='1 1 1 1'/>
	</material>



	<link name='base'>
		<visual>
			<geometry>
				<box size='0.5 0.5 0.1'/>
			</geometry>
			<material name='gold'/>
			<origin xyz="0 0 0.05"/>
		</visual>
	</link>

	<link name='elevator'>
		<visual>
			<geometry>
				<cylinder length='${elevator_len}' radius='0.02'/>
			</geometry>
			<material name='gold'/>
			<origin xyz="0 0 0.6"/>
		</visual>
	</link>

	<joint name='base-to-elevator' type="fixed">
     	<parent link="base"/>
   		<child link="elevator"/>
     	<origin xyz="0 0 0"/>
   	</joint>

	<link name='base-rotator'>
		<visual>
			<geometry>
				<cylinder length='0.05' radius='0.1'/>
			</geometry>
			<material name='gold'/>
			<origin rpy='0 0 0' xyz="0 0 0"/>
		</visual>
	</link>

	<joint name="elevator-to-base-rotator" type="prismatic">
		<parent link="elevator"/>
		<child link="base-rotator"/>
		<limit effort="1000.0" lower="0" upper='${elevator_len}' velocity="10"/>
		<origin rpy="0 0 0" xyz="0 0 0.125"/>
      	<axis xyz="0 0 1"/>
	</joint>

	<link name='arm'>
		<visual>
			<geometry>
				<cylinder radius='0.03' length="${arm_len}"/>
			</geometry>
			<material name='gold'/>
			<origin rpy='0 1.57 0' xyz="0.5 0 0"/>
		</visual>
	</link>

  	<joint name="base-rotator-to-arm" type="revolute">
	    <axis xyz="0 0 1"/>
	    <limit effort="1000.0" lower="0.0" upper="6.28" velocity="0.5"/>
	    <origin rpy="0 0 0" xyz="0 0 0"/>
	    <parent link="base-rotator"/>
	    <child link="arm"/>
  	</joint>

 	<link name='arm-rotator'>
		<visual>
			<geometry>
				<sphere radius='0.05'/>
			</geometry>
			<material name='white'/>
			<origin rpy='0 0 0' xyz="0 0 0"/>
		</visual>
	</link>

	<joint name="arm-to-arm-rotator" type="fixed">
	    <origin rpy="0 0 0" xyz="${arm_len} 0 0"/>
	    <parent link="arm"/>
	    <child link="arm-rotator"/>
  	</joint>

  	<link name='manipulator'>
		<visual>
			<geometry>
				<cylinder length="${manipulator_len}" radius='0.02'/>
			</geometry>
			<material name='gold'/>
			<origin rpy='0 1.57 0' xyz="0.1 0 0"/>
		</visual>
	</link>

	<joint name="arm-rotator-to-manipulator" type="revolute">
		<axis xyz='0 0 1'/>
		<limit effort="1000.0" lower="${manipulator_down_range}" upper="${manipulator_up_range}" velocity="0.5"/>
	    <origin rpy="0 0 0" xyz="0 0 0"/>
	    <parent link="arm-rotator"/>
	    <child link="manipulator"/>
  	</joint>

</robot>